---
title:  Environments
---

### Dynamic Environment Configuration Using JSON in Flutter Assets

Using JSON files for environment configurations in Flutter is a robust, flexible, and secure approach. It simplifies managing environment-specific settings, enhances security by avoiding hard-coded sensitive data, and offers advantages over using the `flutter_dotenv` package.

### How to use

- In the default environment
```bash
flutter run

OR

flutter run --dart-define="ENV_PATH=assets/env/default.json"
```

- In the development environment
```bash
flutter run --dart-define="ENV_PATH=assets/env/develop.json"
```

- In the staging environment
```bash
flutter run --dart-define="ENV_PATH=assets/env/staging.json"
```

- In the Production environment
```bash
flutter run --dart-define="ENV_PATH=assets/env/production.json"
```

#### Example Configuration (`assets/env/develop.json`)

```json
{
  "app_title": "MyApp",
  "env_type": "development",
  "api_url": "https://api.dev.example.com",
  "enable_local_logs": true
  ...
}
```

#### Steps to Implement

1. **Update `pubspec.yaml`**: Add paths to JSON files in the `assets` section and run `flutter pub get`.

    ```yaml
    flutter:
      assets:
        - assets/env/develop.json
        - assets/env/production.json
        - assets/env/staging.json
        - assets/env/default.json
    ```



2. **Fetch Configuration**: We have used `String.fromEnvironment` in Dart to load the JSON file specified by `ENV_PATH`.

    ```dart
    const String envPath = String.fromEnvironment("ENV_PATH", defaultValue: "assets/env/default.json");
    ```

3. **Run the App**: Use `flutter run` with the `--dart-define` flag to specify the environment configuration file.

### Why Use JSON Files for Environment Configuration

#### Benefits of Our JSON Approach

1. **Simplicity and Readability**
   - JSON files are easy to read and write, making configuration management straightforward.

2. **Consistency**
   - Uniform settings across different environments (development, staging, production).

3. **Flexibility**
   - Easily switch between environments without changing the codebase.

4. **Separation of Concerns**
   - Keeps environment-specific settings separate from the main application logic.

5. **Environment-Specific Config**
   - Tailor settings for different environments (development, testing, production) without code changes.

6. **The Keeper of Secrets**
   - Stores sensitive information like API keys, passwords, and configuration settings securely.

#### How It Is Better Than the Flutter Dotenv Package

1. **Structure and Type Safety**
   - JSON files provide a structured way to store configuration data.
   - Enforce type safety with Dart's JSON serialization.

2. **Integration with Asset Management**
   - JSON files are managed as Flutter assets, ensuring correct bundling.
   - Use Flutter's `dart-define` feature to specify the configuration file at runtime.

3. **Ease of Use**
   - JSON is a universally known format, making it easier for teams to adopt.

### Security Considerations

#### Handling Sensitive Information

1. **Environment Separation**
   - Prevents hard-coding sensitive data, reducing the risk of exposure.

2. **Gitignore Sensitive Files**
   - Add `assets/env/*.json` to `.gitignore` to keep sensitive files out of version control, preventing accidental exposure in public repositories.

    ```gitignore
    assets/env/*.json
    ```

### Maintaining Consistency with Environment Variables

1. **Centralized Configuration**
   - Centralizes all environment-specific settings in JSON files, ensuring consistency across different environments.

2. **Ease of Updates**
   - Allows for quick updates to environment-specific settings.

3. **Minimizes Errors**
   - Reduces the likelihood of misconfigurations by keeping all environment variables in a single, structured file.

4. **Developer-Friendly**
   - Simplifies onboarding for new developers by providing clear, consistent environment settings.

5. **CI/CD pipelines**
   - Automatically switch configurations based on the environment in CI/CD pipelines.

### Addressing Local Development Challenges

1. **Local Development Setup**
   - Provide developers with default and development JSON configuration files to simplify setup.

2. **Ease of Testing**
   - Allow developers to easily switch between different environment configurations for testing.

For more details, [visit this link](../5.directory_structure/3.vaahextendflutter/2.env.md).