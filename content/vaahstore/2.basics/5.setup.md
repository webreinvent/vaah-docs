---
toc: true
---

# Vaah Store Setup

### Step-1 : Clone the store-dev repo
- Go to the following url:
   https://git6.webreinvent.com/vaah/store-dev
- Click on the Clone Button and copy the url from `Clone with SSH key` option
- On the `Dashboard` of GitKraken, click on `clone a repo` in the `URL` section enter the copied `URL`   
  and click on `Clone the repo` button 
  
### Step-2: Initialize Sub Modules
- After cloning the repo it will ask for `whether you want to initialize submodules for store-dev?`,            
you need to click on yes option, it will automatically initialize the submodules for the Store-dev repo.
Or you can do it manually by scrolling to the bottom and double-clicking on the submodule
- You can make sure `SUBMODULES` are initialized by the bottom section of the store-dev repo,
  in the bottom section of it, you will be able to see the `VaahCms/Modules/Store`. 
  You can double click on that to open the `Store` submodule.
### Step-3 : Initialize Git Flow 
Here you need to Initialiize Git Flow in both the store-dev repo and Store submodule   
##### Initialize Git Flow in the store-dev repo,
- make sure you are in the master branch of the repo
- click on Settings icon at the left side of your profile
- Settings > Gitflow > Initialize Gitflow Button

##### Initialize Git Flow in the Store submodule repo,

- On the bottom section of store-dev repo, double click on `Vaahcms/modules/Store`
- In the Store submodule, checkout to the master branch
- Click on Settings icon at the left side of your profile
- Settings > Gitflow > Initialize Gitflow Button

::alert{type="warning"}
NOTE   
You must check out to the master branch while initializing the Git Flow.
::

### Step-4 : Add Remote URL on Store Sub-Module

- When you hover the mouse on the Remote Section of the Store Sub-Module repo, you will be able to see a plus(+) icon with the   
  green background
- Click on the plus icon, you will be able to see three fields 1. Name 2. Pull URL 3. Push URL
- In the Name section of it add `Git6`
- In the Pull URL section of it, add the store-module-dev repo url by copying the url from `Clone with SSH key` option.
- The Push URL section of the Store sub-module will get autofilled with the same value as of PULL URL

::alert{type="warning"}
NOTE   
You need to copy the url from `Clone with SSH key` option from this link : https://git6.webreinvent.com/vaah/store-module-dev
::

### Step-5 : Change upstream on Store Sub-Module
 Whenever you create a new feature, make sure you change the upstream to GIT6, as we have copied the 
 repo from store dev repo but we will push our code to store module dev repo.
##### You need to follow these steps to Change Upstream
- Right click on the develop or feature branch, you want to push the changes to.
- It will ask for "What remote/branch should feature/feature-name" push to and pull from?
- From the drop-down available, choose Git6 and click on submit button

### Step-6 : Setup the Store on the local machine
 Now we will Setup the Store on the local machine, for that move to main repo i.e store-dev repo by 
 clicking on the cancel button before the Store submodule at the top.
 #### Now you need to carefully follow these steps to Setup the Store
1. Checkout to the develop branch of the store-dev repo
2. Create three .env files here      
   - env(copy the content from .env.example file)       
   - env.your-name (copy the content from similar file existed there) for example .env.sumit    
     here you need to carefully fill the details like DB_DATABASE,DB_USERNAME,DB_PASSWORD.   
     You need to create database before filling these details

   - env.your-name-feature (it will be used for testing environment) for example .env.sumit-feature   
      Here you need to provide the details like DB_DATABASE, DB_USERNAME , DB_PASSWORD etc.   
      You also need to create database on the following url: https://test.dev.getdemo.dev/phpmyadmin/index.php   
      It will ask for credentials like user-name and password, you need to contact your seniors to get that
   
3. Update the vaahcms.json file of Store-dev repo,
   here add the env files you have created like .env.sumit and .env.sumit-feature

4. Now move to the browser and open this in your browser: localhost/directory-name/store-dev/vaahcms/setup,   
      e.g localhost/suman-k001/store-dev/public/vaahcms/setup
   ::alert{type="warning"}
   NOTE   
   You need to make sure that project you have cloned exists in the htdocs directory.   
   localhost/suman-k001/store-dev/vaahcms/setup, here suman-k001 is the directory
   we have cloned our project.
   ::
5. If you encounter PHP errors or require_once errors when trying to open your project locally,
   go to the terminal and run the command: composer update.

6. This will ask some basic questions that we already have discussed while setup the vaahcms.   
   Click on the link to read more about that : https://docs.vaah.dev/vaahcms-2/the-basics/setup
7. After successfully setup the store-dev, login to the Vaah Store using following link:   
      http://localhost/your-directory-name/store-dev/public/backend
8. After login click on Extends > Modules
   click on `activate` button, Store link in the sidebar will be added, click on link to see the 
   dashboard of the Vaah Store.
::alert{type="warning"}
NOTE   
You must checkout to the develop branch of the store-dev repo, before creating these env files.
You need to push the env file changes from the develop branch of store-dev repo
::   

### Step-7 : Create a new feature for your crud
Now you can create a new feature and can start working on that.   
Follow the steps to create a new feature in Git 6
- Hover the mouse over the `GITFLOW`, you will be able to see a Open Gitflow button with green
  background, click on that
- Then click on Start > Feature > Feature name > Start Feature button

::alert{type="warning"}
NOTE   
While creating a feature you need to make sure feature name shouldn't have any spaces with it,
otherwise you will not be able to create that feature.
::

### Step-8 : Setup the Store on the testing environment
- Once you create MR for your feature after you are done with your feature branch, the job will run, go to pipeline section it will give you unique pipeline id, then you need to click on job it will give you the job id from the jobs section and from there   
   it will provide you the testing environment url.   
   e.g https://test.dev.getdemo.dev/store-dev/sumit-k001/public/

- Run the vaah cms setup 
   for e.g https://test.dev.getdemo.dev/store-dev/sumit-k001/public/backend/vaahcms/setup
- All the details will be automatically filled once you choose your feature .env file from the list of dropdowns
   for e.g .env.sumit-feature
- Click on test database connection, then save and next
- Login with the credentials and you will be able to see the dashboard of Vaah store

### Step-9 : Steps to make sure changes are reflected on testing environment
- After login click on Extends > Modules
- Deactivate and then activate the store module again and then click on Publish Assets button
- Sometimes changes are not reflected even after following these steps, in that case you need to
  hard reload and clear the browser cache and repeat the process again to 
- Click on the Store link in the sidebar 
- You should be able to see the dashboard of Vaah Store with updated changes

