---
toc: true
---

# Vaah Store Setup

### Step-1 : Clone the store-dev repo
- Go to the following url:
   https://git6.webreinvent.com/vaah/store-dev
- On the right side of the screen, you will find a dropdown button named `Clone` with light blue background,   
  click on the dropdown button and from the list of available options,copy the url from `Clone with SSH key`   
  option
- On the `Dashboard` of GitKraken, click on `Clone a repo` a modal will open having title `Repository Management`.   
  It will have three sections, on the left most section you need to make sure you choose Clone option,from the   
  middle section you need to make sure `Clone with URL` option is chosen. In the right most section having title   
  `Clone a Repo` you will have two fields `Where to clone to` here choose the directory where you want to clone   
   the repo and in the `URL` field enter the copied `URL` and click on `Clone the repo` button 
  
### Step-2: Initialize Sub Modules
- After cloning the repo it will ask for `whether you want to initialize submodules for store-dev?`,            
  you need to click on yes option, it will automatically initialize the submodules for the Store-dev repo.
- Scroll the left panel of the store-dev repo, in the bottom section of it, under the `SUBMODULES` section   
  be able to see the `VaahCms/Modules/Store` submodule.
- To open the `VaahCms/Modules/Store` submodule, double click on the `VaahCms/Modules/Store` submodule section,   
  a panel will appear with title as `Edit Submodule`, in the bottom section of it, click on `Open this submodule` button
- Similarly to go back to `store-dev` repo, you can simply click on cross button available next to the Store `submodule`   
  available at the right next to `store-dev` repo.
### Step-3 : Initialize Git Flow 
Here you need to Initialiize Git Flow in both the store-dev repo and Store submodule   
##### Initialize Git Flow in the store-dev repo,
- Make sure you are in the master branch of the repo, just click on the `Local` option on the left side of the screen   
  then check whether the master is checked or not.

::alert{type="warning"}
NOTE   
To checkout to any branch in GitKraken, just double click on the branch you want to checkout
::
- On the topmost section to the right of your screen, click on settings icon at the left next to your profile
- In the left panel of your screen, after scrolling you will be able to see `Gitflow` just click on that
- A panel will appear to your right, to the bottom section of the panel click on `Initialize Gitflow` button 

::alert{type="warning"}
NOTE   
To exit from `Preferences` section, scroll to the top then click on `Exit Preferences` button
::

##### Initialize Git Flow in the Store submodule repo,

- Make sure you are in the master branch of the repo, just click on the `Remote` option on the left side of the screen   
  then scroll to the bottom section of the `Remote` check whether the master is checked or not.
- On the topmost section to the right of your screen, click on settings icon at the left next to your profile
- In the left panel of your screen, after scrolling you will be able to see `Gitflow` just click on that
- A panel will appear to your right, to the bottom section of the panel click on `Initialize Gitflow` button

::alert{type="warning"}
NOTE   
You must check out to the master branch while initializing the Git Flow.
::

### Step-4 : Add Remote URL on Store Sub-Module

- When you hover the mouse on the Remote Section of the Store Sub-Module repo, you will be able to see a plus(+)   
  icon with the green background
- Click on the plus icon, a panel will appear from the left side to your screen having title as `Add Remote`
- From the available options to the bottom of the `Add Remote`, click on `URL` 
- you will be able to see three fields 1. Name 2. Pull URL 3. Push URL
- In the Name section of it add `Git6`
- In the Pull URL section of it, add the store-module-dev repo url by copying the url from `Clone with SSH key` option.
::alert{type="warning"}
NOTE   
Copy the url from `Clone with SSH key` option from this link : https://git6.webreinvent.com/vaah/store-module-dev
::  
- The Push URL section of the Store sub-module will get autofilled with the same value as of PULL URL
- Click on `Add Remote` present at the bottom of the panel,


### Step-5 : Change upstream on Store Sub-Module
 Whenever you create a new feature, make sure you change the upstream to GIT6, as we have copied the repo from    
 store dev repo but we will push our code to store module dev repo.
##### You need to follow these steps to Change Upstream
- Right click on the develop or feature branch, you want to push the changes to,out of available options   
  click on `Set Upstream` option.
- It will ask for "What remote/branch should feature/feature-name" push to and pull from?
- From the drop-down available, choose Git6 and click on submit button

### Step-6 : Setup the Store on the local machine
 Now we will Setup the Store on the local machine, for that move to main repo i.e `store-dev`
 #### Now you need to carefully follow these steps to Setup the Store
1. Checkout to the develop branch of the store-dev repo
2. In the php storm or whatever text editor you are using open your project, in the left panel of your screen    
   scroll to the bottom and create three .env files here     
   - .env(just copy the content from .env.example file)       
   - Here you need to create custom env file for that create a new file named .env.your-name  for example .env.sumit    
     copy the content from similar env files already existing like .env.ramesh here you need to carefully fill the    
     details like DB_DATABASE,DB_USERNAME,DB_PASSWORD.
     ::alert{type="warning"}
     NOTE
     You need to create database before filling these details   
     Go to the following link : http://localhost/phpmyadmin/ and create database here
     ::
        
   - .env.your-name-feature (this env file will be used for testing environment) for example .env.sumit-feature   
      Here you need to provide the details like DB_DATABASE, DB_USERNAME , DB_PASSWORD etc.   
      You also need to create database on the following url: https://test.dev.getdemo.dev/phpmyadmin/index.php   
      It will ask for credentials like user-name and password, you need to contact your seniors to get that.
   
3. Update the vaahcms.json file, scroll to the bottom of your left panel and from there open the file `vaahcms.json`,   
   add the env files you have created like .env.sumit and .env.sumit-feature

4. Now move to the browser and open the following link in your browser:   
   http://localhost/your-directory-name/store-dev/public/vaahcms/setup,
   ::alert{type="warning"}
   NOTE   
   You need to make sure that project you have cloned exists in the htdocs directory like with your name and      
   replace your-directory-name with actual directory name.
   URL : http://localhost/sumit-k001/store-dev/public/vaahcms/setup.
   ::
5. If you encounter PHP errors or require_once errors when trying to open your project locally,go to the terminal    
   which is found in the bottom of the screen to the left side and run the command: `composer update`

6. This will ask some basic questions that we already have discussed while setup the vaahcms.   
   Click on the link to read more about that : https://docs.vaah.dev/vaahcms-2/the-basics/setup
7. After successfully setup the store-dev, login to the Vaah Store using following link:   
      http://localhost/your-directory-name/store-dev/public/backend
8. After login click on Extends > Modules
   click on `activate` button, in the left sidebar section `Store`will be added,   
   click on link to see the dashboard of the Vaah Store.
::alert{type="warning"}
NOTE   
You must checkout to the develop branch of the store-dev repo, before creating these env files.You need to push the env file changes from the develop branch of store-dev repo
::   

### Step-7 : Create a new feature for your crud
Now you can create a new feature and can start working on that.   
Follow the steps to create a new feature in Git 6
- Hover the mouse over the `GITFLOW`, you will be able to see a Open Gitflow button with green
  background, click on that
- Then click on Start > Feature > Feature name > Start Feature button

::alert{type="warning"}
NOTE   
While creating a feature you need to make sure feature name shouldn't have any spaces with it,
otherwise you will not be able to create that feature.
::

### Step-8 : Setup the Store on the testing environment
- Once you create MR for your feature after you are done with your feature branch, the job will run, go to the pipeline section   
  it will give you unique pipeline id, then you need to click on job,it will give you the job id from the jobs section and from there   
   it will provide you the testing environment url.   
   e.g https://test.dev.getdemo.dev/store-dev/sumit-k001/public/

- Run the vaah cms setup 
   for e.g https://test.dev.getdemo.dev/store-dev/sumit-k001/public/vaahcms/setup
- All the details will be automatically filled once you choose your feature .env file from the list of dropdowns
   for e.g .env.sumit-feature
- Click on test database connection, then save and next
- Login with the credentials and you will be able to see the dashboard of Vaah store

### Step-9 : Steps to make sure changes are reflected on testing environment
- After login click on Extends > Modules
- Deactivate and then activate the store module again and then click on Publish Assets button
- Sometimes changes are not reflected even after following these steps, in that case you need to
  hard reload and clear the browser cache and repeat the process again to 
- Click on the Store link in the sidebar 
- You should be able to see the dashboard of Vaah Store with updated changes
  
