---
toc: true
title: Basics of Mobile Automation
---

## Introduction
This documentation is all about getting started with the Flutter App automation using WebdriverIO. Here you will learn about all the concepts required to automate a flutter app using WebdriverIO and appium.

## Locate Elements in Flutter App
To locate the elements in the flutter app, follow the steps mentioned below:
1. Open the flutter application project in your IDE (VS Code preferred).
2. Start the emulator.
3. Select **Run & Debug** option from the left menu.
4. Now, click on the play button. If the play button is not visible follow thw steps below otherwise go to **step 8**.
5. Click on **Run & Debug**.
6. Select **Dart & Flutter..** option.
7. Then select **Flutter [your_application_name]**.
8. Now, click on the play button.
9. Once the application is running on the emulator, click on the devtools option from the toolbar at the top. Refer to the image below: 
    <img src="/images/testing/flutter_toolbar.png">
10. A **Widget Inspector** window should have opened. Select the **widget mode** option. Refer to the image below:
    <img src="/images/testing/widget_mode.png">
11. Open the emulator and click on the element you want to locate.
12. The code snippet relative to the element should be visible on the code editor.
13. Repeat the same steps to locate all the elements.

## Selectors
To locate a flutter element using WebdriverIO, we a need a seperate package called `appium-flutter-finder`. This package contains several functions which help us to locate a flutter element within the automation script.

There are 4 locators which are available in package `appium-flutter-finder`. Lets look at each of them one by one

### 1. byValueKey
This is used to locate an element using the key widget added in the element. This is same as `id` we use for web elements.

**Flutter Code:**
```dart
floatingActionButton: FloatingActionButton(
    key: const Key('plus_btn'),
    onPressed: _incrementCounter,
    tooltip: 'Increment',
    child: const Icon(Icons.add),
),
```
**WebdriverIO Code:**
```js
import find from 'appium-flutter-finder'
const btn = find.byValueKey('plus_btn');
```

### 2. byText
This is used to locate an element using the text in the element.

**Flutter Code:**
```dart
const Text(
    'This is button',
),
```
**WebdriverIO Code:**
```js
import find from 'appium-flutter-finder'
const text = find.byText('This is button');
```

### 3. byType
This locator strategy is used to locate an element using the type of the element in flutter code.

**Flutter Code:**
```dart
child: TextField(
    obscureText: true,
        decoration: InputDecoration(
            border: OutlineInputBorder(),
            labelText: 'Password',
),
),
```
**WebdriverIO Code:**
```js
import find from 'appium-flutter-finder'
const textfield = find.byType('TextField');
```

### 4. byTooltip
This locator strategy is used to locate an element using the tooltip text added on the input field.
**Flutter Code:**
```dart
Tooltip(message: "Hello World", child: new Text("foo"));
```
**WebdriverIO Code:**
```js
import find from 'appium-flutter-finder'
const textfield = find.byTooltip('Hello World')
```
::alert{type="warning" class="p-4 mb-4 text-sm text-blue-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-blue-400 dark:border-yellow-800" role="alert"}
**Note:** It is advised to use the 'byValueKey' locator for locating elements as it is more reliable that others.
::

## Methods
In this section we go through different methods available in webdriverio which helps us to automate the flutter app. For this, we need a seperate package called `appium-flutter-driver`. This package includes all the functions to automate a flutter app. Let's look at this one by one.

### elementClick
This method is used to click/tap on an element within the app.
```js
const button = find.byValueKey('key_value');
await driver.elementClick(button);
```

### elementSendKeys
This method is used to input values in an element.
```js
const username = find.byValueKey('username');
await driver.elementSendKeys(username, 'test@gmail.com');
```

### pause
This method is used to add waits/pauses during the test execution.
```js
await driver.pause(3000) //wait duration in milliseconds
```

### elementClear
This method is used to clear the value inside an element.
```js
const username = find.byValueKey('username');
await driver.elementSendKeys(username, 'test@gmail.com');
await driver.elementClear(username);
```

### getElementText
This method is used to fetch the text inside an element.
```js
const heading = find.byValueKey('heading');
const text = await driver.getElementText(heading);
```

### terminateApp
This method is used to terminate the app which is running during the test. It takes `app_id` as a parameter.
```js
await driver.terminateApp('app_id');
```

### activateApp
This method is used to activate the app using the specific app ID. The app should be installed in the device before performing this.
```js
await driver.activateApp('app_id');
```

To explore more about the methods available in `appium-flutter-driver`. Refer to this [documentation](https://github.com/appium/appium-flutter-driver?tab=readme-ov-file#commands) by github.com

## Commands
Apart from the methods, there are several commands available for flutter app which we can use to add waits, scrolls, etc. using the execute() method. 

### scroll
Used to scroll to specific location within the app.
```js
await driver.execute('flutter:scroll', find.byType('ListView'), {dx: 50, dy: -100, durationMilliseconds: 200, frequency: 30})
```

### scrollIntoView
Used to scroll into a view of a specific element within the app.
```js
await driver.execute('flutter:scrollIntoView', find.byType('TextField'), {alignment: 0.1})
await driver.execute('flutter:scrollIntoView', find.byType('TextField'), {alignment: 0.1, timeout: 30000})
```

### waitFor
Used to wait for a specific element within a timeout period.
```js
await driver.execute('flutter:waitFor', buttonFinder, 100)
```

### waitForAbsent
Used to wait for an element to disappear from the viewport.
```js
await driver.execute('flutter:waitForAbsent', buttonFinder)
```

To know more about the commands available with execute method. Refer to this [documentation](https://github.com/appium/appium-flutter-driver?tab=readme-ov-file#commands) by github.com.

## Assertions
There is no default assertion available in WebdriverIO for mobile application. To add assertions in our script, we use `chai` assertion module.

First, we need to install the package using the command:
```shell
npm i chai --save-dev
```
After the package is installed, we can import and use the expect method inside the `chai` module.

### Assert using Text
To assert your tests with matching text. Use the command given below:
```js
import { expect } from 'chai'

const element = await find.byValueKey('haeding');
const text = await driver.getElementText(element);
expect(text).to.equal('expected_value'); 	//matches exact expected value with the text.
expect(text).to.include('expected_value');  //matches a part of expected value with the text
```

### Assert if an element is displayed or not.
To assert if an element is displayed on the app or not, we have to use error handing with flutter:waitFor command.

We have to create a custom function with command flutter:waitFor and error handling. Refer to the code below:

```js
import { expect } from 'chai' 

async isDisplayed(element, milliSeconds = 1000) {
    try {
        await driver.execute('flutter:waitFor', element, milliSeconds);
        return true;
    } catch (error) {
        return false;
    }
}


const element = await find.byValueKey('heading');
expect(await this.isDisplayed(element)).to.be.true;
```

There are many more methods available with chai/expect. Refer to this [documentation by chaijs.com](https://www.chaijs.com/api/bdd/).
