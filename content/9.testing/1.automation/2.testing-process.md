---
toc: true
title: Automation Testing Process & Overview
---

## Introduction
In this documentation, we will explore all the details of the automation testing processes and practices we use. Right from the custom report to script writing conventions.

## Test Report
First, let us look at a custom spec report that is generated by the automation script after some modifications have been applied.

<img src="/images/testing/spec_report.png">

Let's understand a few terms used in the test report:

1. **Page ID:** This is a custom ID for the page on which the testing is going on. Here in this case, it is `IP`.
2. **Page Name:** This represents the name of the page that you are testing. In this case, the page name is `Introduction`.
3. **Page URL:** URL of the webpage that you are testing.
4. **Group ID:**  This represents the name of the group/section of the test cases.
5. **Group Name:** Name of the test case group.
6. **Status:** Status of individual test cases Passed/Failed with symbols.
7. **Test ID:** Custom unique ID for each test case.
8. **Test Case Name:** Name of the test case. 
9. **Expect Message:** Expect message of the test case.

To generate this report, we need to create and configure the [Page.js](./2.testing-process.md#pagejs-file) file. We also need to add all the details about the points mentioned above in the [Data](./2.testing-process.md#data-file) file. And we need to configure the spec file as well. 

We learn about all this in the upcoming sections.

## Page.js File
Before writing an automation script, we need to create a file named `Page.js`. This file helps us to create a custom **spec** report with appropriate coloring added for enhanced visibility of each test case.

Let us look at the sample `Page.js` file:

```js

import chalk from 'chalk';
import color from 'cli-color'
import env from '../../wdio.env.js'

chalk.enabled = true
chalk.level = 3

const envObj = new env();

const params = envObj.getParams();


/**
 * main page object containing all methods, selectors and functionality
 * that is shared across all page objects
 */
export default class Page {

    constructor() {
        this.base_url = params.base_url;
        this.is_human_pause = params.is_human_pause;
        this.params = {
            page: {
                id: null,
                name: null,
                path: null,
                url: null,
            },
            group: {
                count: null,
                name: null,
            },
            test: {
                count: null,
                name: null,
                data: null,
                expect: null,
            }
        };

    }

    //-------------------------------------------------
    open (url) {
        return browser.url(url);
    }
    //-------------------------------------------------
    bold(str)
    {
        return chalk.bold(str);
    }
    //-------------------------------------------------
    highlight(str)
    {
        return chalk.magenta(str);
    }
    //-------------------------------------------------
    pageId(params)
    {

        return this.bold(`
[PAGE ID: ${this.highlight(params.page.id)}] Page: `+params.page.name+` URL: `+params.page.url);
    }
    //-------------------------------------------------
    groupId(params)
    {
        let id = chalk.red(`
--------------------------------------------------------------------------------------------------------`);
        id += this.pageId(params);
        id += `
[GROUP ID: `+this.highlight(params.page.id+"_"+params.group.count)+"] "+params.group.name;

        return id;
    }
    //-------------------------------------------------
    testId(params)
    {
        let id = `[TEST ID: `+this.highlight(params.page.id+"_"+params.group.count+"_"+params.test.count)+"] "+params.test.name;
        if(params.test.expect)
        {
            id += `
    ${color.blue('Expect:')} ${params.test.expect}`;
        }


        return id;
    }
}
```

Here you can observe different methods and objects inside the Page class. Let's look at them one by one.

1. **open**: The open method is used to navigate to the URL of the page.
2. **bold**: Used to apply bold formatting to the text passed as an argument.
3. **highlight**: Used to apply 'magenta' color formatting to the text passed as an agrument.
4. **pageId**: Returns a string with a formatted Page ID, Name and URL.
5. **groupId**: Returns a string with a formatted test group ID and Name.
6. **testId**: Returns a string with a formatted test ID, Name and Expect message.

The Page.js file also contains several objects inside the constructor. The objects, such as baseUrl and is_human_pause, have been referenced in the file wdio.env.js. To use more objects from the wdio.env.js file, you should reference all the objects as mentioned above.

## Data File
In these file, all the details regarding the test case, such as test case name, expect message, test case ID, group ID and assert value.

We also add all the locators and test data used for the test cases.

Each webpage must have separate data files with locators, test data, test case descriptions, etc.

To understand this better, let's look at a sample data file for a page:
```js
import Page from '../vaah-webdriverio/Page.js'

export default class Registration extends Page{
    constructor() {
        super();
        this.params = {
            group: {
                count: null,
                name: null,
            }
        }
        this.element = {
            cookie_accept_btn_id: 'onetrust-accept-btn-handler',
            page_heading_text: 'h1=Create my account',
            welcome_message_class: 'register-wrapper',
            title_label_span: 'span*=Title',
            title: '//*[text()="Title*"]/../select',
            first_name_label: 'label*=First name',
            first_name_id: 'firstName',
            last_name_label: 'label*=Last name',
            last_name_id: 'lastName',
            landline_id: 'landline',
            mobile_label: 'label*=Mobile',
            mobile_id: 'mobile'
        }
        this.value = {
            title: 'Mr',
            first_name: 'Tom',
            last_name: 'howard',
            landline: '442045780871',
            invalid_password: 'testing',
            placeholder: 'placeholder',
        }
        this.params.page = {
            id: "RG",
            name: "Registration",
            url : this.base_url+"/register"
        }
        this.groups = [
            {
                count: 1,
                name: "UI",
                tests: [
                    {
                        count: 1.1,
                        name: "Verify the URL of the registration page",
                        expect: "The URL should be: "+this.params.page.url,
                        assert: this.params.page.url
                    },
                    {
                        count: 1.2,
                        name: "Verify the title of the registration page",
                        expect: "The title should be: Toolstation",
                        assert: "Toolstation"
                    },
                    {
                        count: 1.3,
                        name: "Verify if the heading is visible on the registration page or not",
                        expect: "The heading should be visible on the registration page",
                    }
                ]
            }
        ]
    }
}
```
### Locators and Values
All the locators for the elements present on a particular page should be added to the `this.element` object in the constructor. Only the value of the locator should be added for each element.

Test data used within the automation script for that page, should be added to the `this.value` object. Refer to the sample Page.js file for reference.

Also notice the namming convention of the locators and values.

### Page Details
The Page ID, Name and URL which was visible in the custom spec report mentioned in the section: [Test Report](./2.testing-process.md#test-report) should be added in the `this.params.page` object.

Refer to `this.params.page` object in the constructor.

```js
this.params.page = {
    id: 'RG',                          // Page ID
    name: 'Registration',              // Page Name
    url : this.base_url+'/register'    // Page URL (base_url referenced from wdio.env.js)
}
```

### Test Group
The data file also contains test groups with group ID, Name and test cases inside each group. All these details should be added to the `this.group` object. Refer to the code snippet below:

```js
this.groups = [
            {
                count: 1,           // Group ID
                name: "UI",         // Group Name
                tests: [
                    {
                        count: 1.1,
                        name: "Verify the URL of the registration page",
                        expect: "The URL should be: "+this.params.page.url,
                        assert: this.params.page.url
                    }
        ]
    }
]
```

### Test Case Description
In this section, we will learn about the process of writing test case details such as test case id, name, expect message and assert value. All these details should be added inside the object `tests: [ ]`.

```js
tests: [
    {
        count: 1.1,                                
        name: "Verify the URL of the registration page",
        expect: "The URL should be: "+this.params.page.url,
        assert: this.params.page.url
    }
```

In the code snippet above, we have four objects.
1. **count**: Unique test case ID for each test case.
2. **name**: Name of the test case
3. **expect**: Expect message for the test case.
4. **assert**: Assert value of the test case.

::alert{type="warning" class="flex items-center p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800" role="alert"}
- Some of the test cases may not contain the **assert** object, such as the test case: 'Verify if the title is visible on the page or not'. For these test cases, only count, name, and expect objects should be added.
- If the count of the test case reaches **1.9**. Then, the upcoming test cases should begin with **2.1** and not **1.10**. After this, it should go on like 2.2, 2.3, etc.
::

## Page Object File
In this section, we are going to have a look into the page object file. The page object file contains all the methods for each test case and some additional methods as needed. 

All the functionalities, such as locating an element, opening a URL or clicking a button. All functionality happens in this page object file.

Let's look at a sample page object file for better understanding.

```js
import Page from '../vaah-webdriverio/Page.js'
import Selector from '../vaah-webdriverio/Selector.js'
import VaahAsserts from "../vaah-webdriverio/VaahAsserts.js";

let Asserts = new VaahAsserts();
let Sl = new Selector();

export default class RegistrationPage extends Page{
    constructor() {
        super();
        this.params.page.id = "RG";
        this.params.page.name = "Registration";
        this.params.page.path = "/register";
        this.params.page.url = this.base_url+this.params.page.path;
    }

    async open() {
        await browser.maximizeWindow();
        await Asserts.pause();
        await super.open(this.params.page.url);
    }

    async firstNameFieldTypeFunctionality(data, assert){
        await Sl.id(data.element.first_name_id).setValue(data.value.first_name);
        await expect(Sl.id(data.element.first_name_id)).toHaveValueContaining(assert);
    }

    async lastNameFieldTypeFunctionality(data, assert){
        const last_name = await Sl.id(data.element.last_name_id);
        await last_name.setValue(data.value.last_name);
        await expect(last_name).toHaveValueContaining(assert);
    }
}
```

Here in this file, there are many things to keep in mind. Let's look at these one by one:

### Selectors
In the code above, you can see that we imported a file named `Selector.js` and used this file to locate all the elements using the methods inside it. Refer to the sample code snippet from `Selector.js` file.

```js
export default class Selector{

    //-----------------------------------------------------
    id(id)
    {
        return $("#"+id);
    }
    //-----------------------------------------------------
    class(name)
    {
        return $("."+name);
    }
    //-----------------------------------------------------
    $(selector)
    {
        return $(selector);
    }
    ...
```
In the code snippet above, you can see that we have different locators as a method. We have locators for `ID`, `class name`, `attribute name and value`, and much more.

We just have to import the file and make the function calls inside it. Refer to the example below:

```js
import Selector from 'Selector.js'
let Sl = new Selector();

const element = await Sl.id('element_id');
```
Similarly, we can use the remaining functions inside `Selector.js` as needed.

### Methods
Inside the Data file, we should include all the methods used for the test cases. Let's look at these methods in detail:

1. **constructor()**: In the constructor, we have to add page id, name and path. We also need to add the complete URL of the page by appending the baseUrl and page path.
2. **Open()**: This method should be included in every page object file to open the specific URL of the page, which should come from `this.params`.
3. **Test methods**: These include all the methods required for each test case. For locating an element, we have to use selector methods and the locators added to the data file inside `this.element`. Similarly, for assertions and test data, we have to use `assert` and `this.value` objects.

## Spec File
The spec file is the starting point of execution of your automation script. This file will contain all the method calls that we create in the [Data](./2.testing-process.md#data-file) file. 

We have to import the data file and the page object file that we have created for a page, as mentioned in the previous sections.

Refer to the sample spec file added below:

```js
import RegistrationPage from '../pageobjects/registration.page.js'
import Registration from '../data/registration.js'
import VaahAsserts from "../vaah-webdriverio/VaahAsserts.js";

let Page = new RegistrationPage();
let Data = new Registration();
let Asserts = new VaahAsserts();
let params = Data.params;
let inputs;

params.group = Data.groups[0];
describe(Page.groupId(params), () => {

    params.test = Data.groups[0].tests[0];
    it(Page.testId(params), async () => {
        inputs = Data.groups[0].tests[0];
        await Page.open();
        await Asserts.pageUrl(inputs.assert);
    })

    params.test = Data.groups[0].tests[1];
    it(Page.testId(params), async () => {
        inputs = Data.groups[0].tests[1];
        await Page.open();
        await Asserts.pageTitle(inputs.assert);
    })

    params.test = Data.groups[0].tests[2];
    it(Page.testId(params), async () => {
        inputs = Data.groups[0].tests[2];
        await Page.open();
        await Page.mandatorySymbolVisibility(Data, inputs.assert);
    })
})
```

There are several points to note in this file. Let's look at these one by one:
1. The data file `registration.js` is imported and assigned to a variable **Data**.
2. The page object file `registration.page.js` is imported and assigned to a variable **Page**.
3. The params object inside `registration.js` file is assigned to a new variable, **params**.
4. For the test suite name: the group object added in the data file is passed as an argument to the function **groupId()** of file `Page.js`.
5. Similarly, for test case name, the test object inside the3 group is passed as an argument to the function **testId()** of the `Page.js` file.
6. Notice that the first two statements inside the **it** block were 
    ```js
    inputs = Data.groups[0].tests[2];
    await Page.open();
    ```
    - The first statement assigns the test object inside a group in the data file to the `inputs` variable.
    - The second statement is used to call the open() method inside the page object file.
7. After this, the last statement inside the **it** block is the method call for the test case method created in the page object file.
8. The variable **Data** is passed as an argument in the method `Page.mandatorySymbolVisibility`.
9. Similary, we have to pass the **Data** variable whenever we make a call to a function inside the page object file.
10. We have to update the `params.test` object for every test case or it block.
11. We have to update the `params.group` object for every test group or describe block.

## Executing the script
### Execute all the test files
To execute the script, run the following command: (This will execute all the test files added in spec folder)
```shell
npm run wdio
```

### Execute a specific test file
To execute a specific test file, run this command (this will execute login.e2e.js).
```shell
npx wdio --spec ./tests/wdio/specs/login.e2e.js
```

### Execute tests based on `page id`, `group id` or `test id`
If you need to run tests based on page id, group id or test id, you can use following command:
1. For **Page ID**, use the command: `npx wdio --mochaOpts.grep <page id>`
    ```shell
    npx wdio --mochaOpts.grep LI // This will run all the test cases under the Page with Page ID LI_1
    ```
2. For **Group ID**, use the command: `npx wdio --mochaOpts.grep <group id>`
    ```shell
    npx wdio --mochaOpts.grep LI_1 // This will run all the test cases under the Group with Group ID LI_1
    ```
3. For **Test ID**, use the command: `npx wdio --mochaOpts.grep <test id>`
    ```shell
    npx wdio --mochaOpts.grep LI_1_1.1 // This will run all the test cases under the Page ID LI having Group ID 1 and Test ID starting with 1.1
    ```