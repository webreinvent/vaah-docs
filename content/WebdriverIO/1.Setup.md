---
toc: true
---

# WebdriverIO Setup
Welcome to the WebDriverIO Setup Documentation! In this comprehensive guide, we will walk you through the essential steps and best practices for setting up WebDriverIO, a powerful and flexible JavaScript automation framework, to supercharge your web testing efforts.


## Introduction
This guide is your roadmap to a seamless setup process, ensuring that you can efficiently write and execute automated tests using WebDriverIO. You will learn about different Mocha framework, what is data file and page object file, how to create these file, how to generate test cases, etc.

Thoroughly read and follow the steps given in each section one by one. Few of the steps mentioned in the documentation may take substantial amount of to complete. Just wait for it complete and then move ahead.

Always read the note if provided for any section. It will give you an overview of what to expect from teh commands.


#### Why WebdriverIO

WebdriverIO is an automation framework built to automate modern web and mobile applications. It simplifies the interaction with your app and provides a set of plugins that help you create a scalable, robust and stable test suite.

You can use WebdriverIO to automate:

- modern web applications written in React, Vue, Angular, Svelte or other frontend frameworks
- hybrid or native mobile applications running in an emulator/simulator or on a real device
- native desktop applications (e.g. written with Electron.js)
- unit or component testing of web components in the browser

#### What You'll Find Here
- Detailed setup instructions for webDriverIO.
- Best practices and tips for configuration.
- Real-World examples to illustrate key concepts.
- Troubleshooting guidance to overcome common challenges.
- Resources to further enhance your WebDriverIO skills.

To learn more about WebDriverIO automation testing framework refer this [blog by thetesttribe.com](https://www.thetesttribe.com/blog/what-is-webdriverio/) on WebDriverIO


## Requirements

- **Node.js** should be installed on your computer.
- **Knowledge of JavaScript**.
- **Package Manager**: npm or yarn (npm comes bundled with Node.js)
- **Code Editor**: A code editor like VSCode or PHPStorm.
- **WebDriver-Compatible Browser**: Common choices are Google Chrome and Mozilla Firefox.
 
## Setup WebDriverIO Project

1. Open Code Editor.
2. Create a project.
3. Run command: `npm init -y`. (This creates a node project in that folder that will have a package.json file.)
4. Run command: `npm init wdio`. (This will install webdriverIO on the project)
5. When the command is running, choose appropriate options based on the system.
6. Choose _**spec reporter**_  for test case reporting.
7. Choose _**Mocha Framework**_ for framework.
8. Wait for the command to complete.
9. Once the command has run successfully, It will install some directories and files on the project.
10. Check whether the `wdio.conf.js` file are created or not.
11. There should be some sample test cases which were created during the setup. Verify the same in `test/spec/` directory.
    1. To run the test cases run command:
    > npx run wdio 

    or

    > npx wdio run wdio.conf.js

12. To run specific tests: Run the command:
    > npx wdio run wdio.conf.js --spec test1.js

13. Once the sample test scripts are running successfully, you can modify and create your own scripts.

::alert{type="info"}
Note:
- The points in the Requirement section must be fulfilled before working on the setup.
- Carefully choose the options during the WebDriverIO setup.
- Some commands may take longer time to execute which is expected. Just wait for it to complete. 
- Previous commands must be completed successfully before running the next command.
::

## Mocha Framework
Mocha is a feature-rich JavaScript test framework running on Node.js and in the browser, making asynchronous testing simple and fun. Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases. Hosted on GitHub.
::alert{type="warning"}
If you completed the previous steps and installed the mocha framework during setup then ignore the steps given below. This is only for those who do not add mocha during installation and want to install after setup.
::

First, install the adapter package from NPM:
> npm install @wdio/mocha-framework --save-dev

After a successful installation of the mocha framework. Verify the `package.json` file the presence of mocha framework:
> "@wdio/mocha-framework": "^8.16.12"

![](https://ibb.co/BjdGK4w)

#### Advantages of Mocha
1. **Feasibility:** Mocha is simple to install and get started with. It can be easily integrated into JavaScript projects, quickly incorporating testing into the development workflow.

2. **Versatility:** Mocha can be used in browser and server-side environments, making it suitable for various JavaScript applications. Mocha can efficiently test code when developing a back-end server or front-end web application.

3. **Accuracy:** Mocha generates detailed and accurate test reports, clearly indicating the success or failure of each test. Mocha provides informative error messages, and stack traces when a test fails, making it easier to pinpoint and debug issues in code.

To know more about the mocha framework refer to this [documentation by mochajs.org](https://mochajs.org/)

## Data File
Before writing the test cases for a page, we have to locate all the usable element. We may require certain data to run specific test cases for example, we require username and password for login test. To solve this issue and to organize data and locators for better accessibility we need to create data file for a specific page.

There should be one data file for each page just like the page object file. It will include all the usable locators of that page and the values used during the test runs. 

#### How to create data file
1. After setup, you need to create a new Data directory in directory which has **spec** and **pageobject** folder.
2. Inside this directory, create a data file for a particular page. Follow the naming convention of the file as below:
   >**Naming Convention:** page_name.js

   >**Example:** login.js 

3. Once the file is created start adding locators and test cases in that file

#### What and How to add in data file

Add the locators, values and test cases with Group, Count of each test suite and test cases. Refer to the sample code below:
```js
const Page = require('../vaah-webdriverio/Page');

class Setup extends Page{
    constructor() {
        super();
        ....

        this.element = {
            element_name: 'element_locator'
            ....
        }
        this.value = {
            element_name: 'element_value'
            ....
        }
```
Here in this sample code you will add locators inside this.element and the values which will be used should be added inside this.value.

The _element_locator_ will contain only the value of a specific attribute id, class, data-testid, etc. 

We need to use the locators based on the priority mentioned in the table below:

| Priority 	| Selector    	| Use                                                              	| Data File                                               	| HTML code                                     |
|----------	|-------------	|------------------------------------------------------------------	|---------------------------------------------------------	|-----------------------------------------------|
| 1        	| data-testId 	| Sl.testId(data.element.element_name_testId)                      	| element_name_testId: 'value'                            	| `<input data-testId = 'data-testId value'>` 	|
| 2        	| id          	| Sl.id(data.element.element_name_id)                              	| element_name_id: 'value'                                	| `<input id='value'>`                         	|
| 3        	| class       	| Sl.class(data.element.element_name_class)                        	| element_name_class: 'message'                           	| `<input class='message'>`                    	|
| 4        	| $           	| Sl.$(data.element.element_name)                                  	| element_name: 'h1'                                      	| `<h1>Hello</h1>`                             	|
| 5        	| attr        	| Sl.attr(data.element.element1.attr, data.element.element1.value) 	| element1: {      attr: 'label',      value: 'country' } 	| `<span label='country'>`                     	|
| 6        	| name        	| Sl.name(data.element.element_name)                               	| element_name: 'animal'                                  	| `<input name='animal'>`                      	|

The locators should be added based on the priority given in the table.

After adding all the locators and values, description of each test case should be added with with id, name, expected behaviour, assert. Take a look at the example below:
```js
tests: [
            {
                count: 1.1,
                name: "Verify the URL",
                expect: "The URL should be: "+this.params.page.url,
                assert: this.params.page.url
            },
                ...
]
```

## Page Object File
Page Object Model (POM) is a design pattern, popularly used in test automation that creates Object Repository for web UI elements. The advantage of the model is that it reduces code duplication and improves test maintenance.

Verify the Page directory which should be present in the same directory in which the spec directory is placed. Verify if any page object file is available on the page or not. 

Usually the page object file contains all the functions as well as the locators inside them. But we do not need to add locators as we have created a dedicated file called data file for that.

#### What and How to add in page object file

- This file will contain all the functions that are used for the test cases.
- Each test case will have a separate function. Additional functions can also be included if required.
- In this file we are going to use the functions which are provided in the Selectors.js file.
- Name of the file should be as per the below standards:
    > Naming Convention: ***page_name.page.js***

    > Sample: **login.page.js**
- Sample function for a test case:
  ```js
  async assertSuccessMessage(data, assert){
      await Sl.testid(data.element.Save_Button_testid).scrollIntoView();
      await Sl.testid(data.element.Save_Button_testid).click();
      await expect(Sl.class(data.element.Validation_Message_class)).toHaveTextContaining(assert);
  }
Now compare this code with the priority table mentioned above.

## Spec File
The spec files are the starting point of execution of the test scripts. The webdriverIO will look for spec file mentioned in the `wdio.conf.js` file.

This file will include all the function calls of the functions which are created in page object file. This will also keep track of the pageId, groupId and the testId.

> Naming Convention: ***page_name.e2e.js***

> Sample: ***login.e2e.js***

Let's take a look at the sample test script:

```js
let params = Data.params;   
    let inputs;

    params.group = Data.groups[0];

    describe(Page.groupId(params), () => {

        params.test = Data.groups[0].tests[0];
        it(Page.testId(params), async () => {
            inputs = Data.groups[0].tests[0];
            await Page.open();
            await asserts.pageUrl(inputs.assert);
        })
        ....
    })
```

**Points to Notice:**

- Notice that variable params is same variable which is used in the Data file.
- `params.group = Data.groups[0];` should be updated for every new group.
- `params.test = Data.groups[0].tests[0]` should also be updated for each test case, so that it can fetch the id, name, expect, assert values from data file.
- Observe the `it(Page.testId(params))`, this is a call to the function which mentioned in 2nd step of custome report in this README.md file.

## How to Generate Custom Spec Report

Currently, after running the test scripts, the generated report looks something like this:

![](https://static.wikia.nocookie.net/dev/images/e/e8/Screen_Shot_2019-09-24_at_15.04.05.png/revision/latest/scale-to-width-down/1200?cb=20190930151146)

But we want to generate a spec report with the Page ID, Group ID and Test ID. The report should also contain the name, expected behaviour of each test case. These all are created in the data file. Notice that we mentioned the count in the test case. This is Test Case ID. Similarly Page ID and Group is also created in data file.

To generate our custom report we need to do some changes in few files. Follow the steps given below:
1. Update the spec reporter in ***wdio.conf.js*** file.

   Previous:
    ```
    module.exports = {
        // ...
        reporters: ['dot', 'spec'],
        // ...
    };
    ```
   Current:
    ```
    module.exports = {
        // ...
        reporters: [
            ['spec', {
                symbols: {
                    passed: `
                        [✓] PASSED: `,
                    failed: `
                        [✖] FAILED: `,
                    },
                },
            ],
    ]   ,
        // ...
    };
    ```

2. Verify the ***Page.js*** file in vaah-webdriverio directory: The file should contain several functions like: *pageId(), groupId(), testId()*.

   **pageId()**:
    ```
    pageId(params)
    {
        return `
    [PAGE ID: ${this.highlight(params.page.id)}] Page: `+params.page.name+` URL: `+params.page.url;
    }
    ```

   **groupId()**:
    ```
    groupId(params)
    {
        let id = chalk.red(`
    --------------------------------------------------------------------------------------------------------`);
            id += this.pageId(params);
            id += `
    [GROUP ID: `+this.highlight(params.page.id+"_"+params.group.count)+"] "+params.group.name;

        return id;
    }
    ```

   **testId()**:
    ```
    testId(params)
    {
        let id = `[TEST ID: `+this.highlight(params.page.id+"_"+params.group.count+"_"+params.test.count)+"] "+params.test.name;
        if(params.test.expect)
        {
            id += `
    ${color.blue('Expect:')} ${params.test.expect}`;
        }

        return id;
    }
    ```

   These files will help us to generate custom spec report with PageID, GroupID and testID.

After updating these files and the running the test cases the report generated should look like this:

![]()



## Important Points
1. Use data-testid locator whenever possible.
2. Always use the functions available in Selectors.js to locate an element.
3. Always use dynamic URL in data files.
   Eg.
    - Static URL: `url: "https://www.google.com/signin"`
    - Dynamic URL: `url : this.base_url+"/signin"`
4. Avoid hardcoded values:
    - Hardcoded: `browser.pause(3000)`.
    - Correct: `browser.pause(is_human_pause)`.
      This is reference to the variable present in ***wdio.env.js*** file
5. Browser pauses should only be applied when the value of the valriable ***is_human*** is true in ***wdio.env.js*** file.
6. The locator name for data-testid locators should end with "_testid". Eg. `intall_btn_testid: 'intall'`
7. Must include headless capability for a browser. This is used to run test cases without opening the browser window. To know more about headless capability, refer to the [documentation by webdriver.io](https://webdriver.io/docs/capabilities/#:~:text=Running%20a%20headless%20browser%20means,Chrome).
8. The headless mode of the browser should also be enabled only when the value of ***is_human*** variable is false.  
