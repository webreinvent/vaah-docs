put:
  tags:
    - Carts
  summary: Update cart products quantity
  description: >
    Updates the quantity of specified products in the cart.
    If the new quantity of a product is less than 1, it will be removed from the cart.
    If multiple products exist in the cart but the payload includes only one product to update,
    the response will include data only for the updated product, not for all products in the cart.
  operationId: updateQuantity
  parameters:
    - '$ref': '../vaahstore.yaml#/components/parameters/uuid'
    - '$ref': '../vaahstore.yaml#/components/parameters/selected_store'
    - '$ref': '../vaahstore.yaml#/components/parameters/currency'
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            products:
              type: array
              description: List of cart products with their details and quantity.
              items:
                type: object
                properties:
                  vh_st_product_id:
                    type: integer
                    example: 1
                    description: The ID of the product.
                  vh_st_product_variation_id:
                    type: integer
                    example: 2
                    description: The ID of the product variation.
                  vh_st_vendor_id:
                    type: integer
                    example: 3
                    description: The ID of the vendor.
                  quantity:
                    type: integer
                    example: 5
                    description: The new quantity for the product. A value of 0 or less indicates removal.
                required:
                  - vh_st_product_id
                  - vh_st_product_variation_id
                  - vh_st_vendor_id
                  - quantity
          required:
            - products

  responses:
    '200':
      description: Cart products quantity updated successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              messages:
                type: array
                items:
                  type: string
                  example: "Saved successfully."
              data:
                type: object
                properties:
                  id:
                    type: integer
                    example: xxx
                    description: "The unique identifier of the cart."
                  uuid:
                    type: string
                    example: "abcd1234-abcd1234"
                    description: "A universally unique identifier (UUID) for the cart."
                  cart_products_count:
                    type: integer
                    description: 'Describe the total product in the cart'
                    example: 2
                  vh_user_id:
                    type: integer
                    example: xxx
                    description: "The ID of the user who owns the cart."

                  total_amount:
                    type: string
                    format: decimal
                    example: "100.12"
                    description: "Price per unit of the product."
                  products:
                    type: array
                    items:
                      type: object
                      properties:
                        vh_st_cart_id:
                          type: integer
                          example: XX
                          description: "The cart ID associated with this product."

                        vh_st_product_id:
                          type: integer
                          example: X
                          description: "The product ID."

                        vh_st_product_variation_id:
                          type: integer
                          example: X
                          description: "The ID of the product variation."

                        vh_st_vendor_id:
                          type: integer
                          example: X
                          description: "The ID of the vendor associated with the product."

                        id:
                          type: integer
                          example: X
                          description: "The unique identifier of the product entry."

                        uuid:
                          type: string
                          example: "abcd1234-abcd1234"
                          description: "The UUID of the product."

                        available_stock_quantity:
                          type: integer
                          example: 13
                          description: "Quantity of stock available for this product variation."

                        is_stock_available:
                          type: integer
                          enum: [ 0, 1 ]
                          example: 1
                          description: "Stock availability flag. 1 for available, 0 for unavailable."

                        price:
                          type: string
                          format: decimal
                          example: "31.17"
                          description: "Price per unit of the product."

                        quantity:
                          type: integer
                          example: 3
                          description: "The quantity of this product in the cart."

                        total_price:
                          type: string
                          format: decimal
                          example: "93.51"
                          description: "Total price calculated as price * quantity."

                        created_at:
                          type: string
                          format: date-time
                          example: "2025-06-19T06:51:00.000000Z"
                          description: "The timestamp when the product entry was created."

                        updated_at:
                          type: string
                          format: date-time
                          example: "2025-06-19T07:26:52.000000Z"
                          description: "The timestamp when the product entry was last updated."




    '400':
      description: Invalid request
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              messages:
                type: array
                items:
                  type: string
                  example: "Cart products list is required."

    '404':
      description: Cart not found
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              messages:
                type: array
                items:
                  type: string
                  example: "Cart not found."
