(self.webpackChunkvuepress=self.webpackChunkvuepress||[]).push([[3692],{396:(e,t,i)=>{"use strict";i.r(t),i.d(t,{data:()=>n});const n={key:"v-f79efabc",path:"/vaahcms/basic/setting/notifications.html",title:"Notifications",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:3,title:"Setup Notifications with queues",slug:"setup-notifications-with-queues",children:[]},{level:3,title:"Sending Notifications",slug:"sending-notifications",children:[]},{level:3,title:"Sending Without Queues",slug:"sending-without-queues",children:[]}],filePathRelative:"vaahcms/basic/setting/notifications.md",git:{updatedTime:1627055118e3}}},3844:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i(6252);const o=(0,n.Wm)("h1",{id:"notifications",tabindex:"-1"},[(0,n.Wm)("a",{class:"header-anchor",href:"#notifications","aria-hidden":"true"},"#"),(0,n.Uk)(" Notifications")],-1),a={class:"table-of-contents"},s=(0,n.Uk)("Setup Notifications with queues"),u=(0,n.Uk)("Sending Notifications"),d=(0,n.Uk)("Sending Without Queues"),c=(0,n.uE)('<h3 id="setup-notifications-with-queues" tabindex="-1"><a class="header-anchor" href="#setup-notifications-with-queues" aria-hidden="true">#</a> Setup Notifications with queues</h3><p>Follow the following steps:</p><ol><li>Set <code>QUEUE_CONNECTION</code> to <code>database</code> in your active <code>env</code> file</li><li>Visit <code>Setting &gt; General &gt; Site Settings &gt; Laravel Queues</code> in your <code>backend dashboard</code> and enable it.</li><li>Run or setup cron job for <code>php artisan queue:work --queue=high,medium,low,default --env=env_filename</code></li></ol><p>If you make any changes in code of your <code>Job</code> class, then must restart the <code>queue:work</code> command.</p><h3 id="sending-notifications" tabindex="-1"><a class="header-anchor" href="#sending-notifications" aria-hidden="true">#</a> Sending Notifications</h3><p>By default <code>VaahCMS</code> does not use laravel queues/jobs to schedule the notification.</p><p>To send notification you can use following code:</p><p>Notification::dispatch($notification, $user, $inputs, $priority)</p><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>$notifiable</code></td><td>is the instance of <code>WebReinvent\\VaahCms\\Entities\\Notification</code></td></tr><tr><td><code>$user</code></td><td>is the instance of <code>WebReinvent\\VaahCms\\Entities\\User</code></td></tr><tr><td><code>$inputs</code></td><td>is the a data array contain values of strings. Eg. If the notification contains <code>#!USER:NAME!#</code> string and then the <code>$input</code> array must be: <code>$inputs = [ &quot;user&quot; =&gt; [ &quot;name&quot; =&gt; &quot;John&quot; ] ]</code> This will replace the string with value provided in the inputs.</td></tr><tr><td><code>$priority</code></td><td>it is the order of execution of the jobs. You can provide following values high medium low default</td></tr></tbody></table><h3 id="sending-without-queues" tabindex="-1"><a class="header-anchor" href="#sending-without-queues" aria-hidden="true">#</a> Sending Without Queues</h3><p>If you want to send the notification without laravel queues, you can use following code</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">Notification</span><span class="token operator">::</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$notification</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$inputs</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',12),l={render:function(e,t){const i=(0,n.up)("RouterLink");return(0,n.wg)(),(0,n.j4)(n.HY,null,[o,(0,n.Wm)("nav",a,[(0,n.Wm)("ul",null,[(0,n.Wm)("li",null,[(0,n.Wm)(i,{to:"#setup-notifications-with-queues"},{default:(0,n.w5)((()=>[s])),_:1})]),(0,n.Wm)("li",null,[(0,n.Wm)(i,{to:"#sending-notifications"},{default:(0,n.w5)((()=>[u])),_:1})]),(0,n.Wm)("li",null,[(0,n.Wm)(i,{to:"#sending-without-queues"},{default:(0,n.w5)((()=>[d])),_:1})])])]),c],64)}}}}]);