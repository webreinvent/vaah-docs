"use strict";(self.webpackChunkvuepress=self.webpackChunkvuepress||[]).push([[3208],{8708:(e,s,a)=>{a.r(s),a.d(s,{data:()=>n});const n={key:"v-4b68776e",path:"/vaahcms/basic/setting/mails.html",title:"Mails",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:3,title:"Setup Mails with queues",slug:"setup-mails-with-queues",children:[]},{level:3,title:"Sending Mails",slug:"sending-mails",children:[]},{level:3,title:"Sending Without Queues",slug:"sending-without-queues",children:[]},{level:3,title:"Customizing The Templates",slug:"customizing-the-templates",children:[]}],filePathRelative:"vaahcms/basic/setting/mails.md",git:{updatedTime:1627055118e3}}},5363:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var n=a(6252);const t=(0,n.Wm)("h1",{id:"mails",tabindex:"-1"},[(0,n.Wm)("a",{class:"header-anchor",href:"#mails","aria-hidden":"true"},"#"),(0,n.Uk)(" Mails")],-1),i={class:"table-of-contents"},l=(0,n.Uk)("Setup Mails with queues"),o=(0,n.Uk)("Sending Mails"),p=(0,n.Uk)("Sending Without Queues"),c=(0,n.Uk)("Customizing The Templates"),u=(0,n.uE)('<h3 id="setup-mails-with-queues" tabindex="-1"><a class="header-anchor" href="#setup-mails-with-queues" aria-hidden="true">#</a> Setup Mails with queues</h3><p>Follow the following steps:</p><ol><li>Set <code>QUEUE_CONNECTION</code> to <code>database</code> in your active <code>env</code> file</li><li>Visit <code>Setting &gt; General &gt; Site Settings &gt; Laravel Queues</code> in your <code>backend dashboard</code> and enable it.</li><li>Run or setup cron job for <code>php artisan queue:work --queue=high,medium,low,default --env=env_filename</code></li></ol><p>If you make any changes in code of your <code>Job</code> class, then must restart the <code>queue:work</code> command.</p><h3 id="sending-mails" tabindex="-1"><a class="header-anchor" href="#sending-mails" aria-hidden="true">#</a> Sending Mails</h3><p>By default <code>VaahCMS</code> does not use laravel queues/jobs to schedule the mail. Hence, mails will be send immediately.</p><p><strong>To send mail you can use following code:</strong></p><p>VaahMail::dispatch($mail, $to, $priority)</p><ul><li><p><code>$mail</code> should an instance of Laravel Mail class.</p></li><li><p><code>$to</code> is the array of recipient:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$inputs</span> <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;email@example.com&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;email&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;email2@example.com&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;name 2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><code>$priority</code> it is the order of execution of the jobs. You can provide following values high medium low default</p></li></ul><hr><p><strong>To send mail to a user you can use following code:</strong></p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">VaahMail</span><span class="token operator">::</span><span class="token function">dispatchToUser</span><span class="token punctuation">(</span><span class="token variable">$mail</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$priority</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><code>$user</code> is an instance of <code>WebReinvent\\VaahCms\\Entities\\User</code></li></ul><hr><p><strong>To send a generic mail to a user you can use following code:</strong></p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">VaahMail</span><span class="token operator">::</span><span class="token function">dispatchGenericMail</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$priority</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><code>$content</code> is the html code you want to send to the user</li><li><code>$user</code> is an instance of <code>WebReinvent\\VaahCms\\Entities\\User</code></li></ul><h3 id="sending-without-queues" tabindex="-1"><a class="header-anchor" href="#sending-without-queues" aria-hidden="true">#</a> Sending Without Queues</h3><p>If you want to send the notification without laravel queues, you can use following code</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token class-name static-context">VaahMail</span><span class="token operator">::</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token variable">$notification</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$inputs</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="customizing-the-templates" tabindex="-1"><a class="header-anchor" href="#customizing-the-templates" aria-hidden="true">#</a> Customizing The Templates</h3><p>To customize the default laravel mail &amp; notification template you must publish the asset, using following commands:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>php artisan vendor<span class="token punctuation">:</span>publish <span class="token operator">--</span>tag<span class="token operator">=</span>laravel<span class="token operator">-</span>mail\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code>php artisan vendor<span class="token punctuation">:</span>publish <span class="token operator">--</span>tag<span class="token operator">=</span>laravel<span class="token operator">-</span>notifications\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This will publish files under <code>resources/views/vendor/mail</code> directory. To affect the VaahCMS <code>Mails</code>, you can edit following file:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>resources/views/vendor/mail/html/header.blade.php\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>resources/views/vendor/mail/html/footer.blade.php\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>resources/views/vendor/mail/html/themes/default.css\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><hr>',29),r={render:function(e,s){const a=(0,n.up)("RouterLink");return(0,n.wg)(),(0,n.j4)(n.HY,null,[t,(0,n.Wm)("nav",i,[(0,n.Wm)("ul",null,[(0,n.Wm)("li",null,[(0,n.Wm)(a,{to:"#setup-mails-with-queues"},{default:(0,n.w5)((()=>[l])),_:1})]),(0,n.Wm)("li",null,[(0,n.Wm)(a,{to:"#sending-mails"},{default:(0,n.w5)((()=>[o])),_:1})]),(0,n.Wm)("li",null,[(0,n.Wm)(a,{to:"#sending-without-queues"},{default:(0,n.w5)((()=>[p])),_:1})]),(0,n.Wm)("li",null,[(0,n.Wm)(a,{to:"#customizing-the-templates"},{default:(0,n.w5)((()=>[c])),_:1})])])]),u],64)}}}}]);