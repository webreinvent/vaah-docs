import{_ as i,r as o,o as c,c as p,a as n,b as t,w as e,d as s,e as l}from"./app.62b9cc5c.js";const u={},r=n("h1",{id:"push-notification",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#push-notification","aria-hidden":"true"},"#"),s(" Push Notification")],-1),d={class:"table-of-contents"},k=l(`<p>The PushNotifications class is responsible for handling both remote and local push notifications in a project. This documentation will guide you through the code and explain its functionalities.</p><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><p>The PushNotifications class is an abstract class that provides static methods to interact with both remote and local notifications. It serves as a wrapper for the RemoteNotifications and LocalNotifications services.</p><p>The RemoteNotifications service manages notifications that are sent from a remote source, commonly employed in scenarios similar to chat applications. In contrast, the LocalNotifications service is responsible for handling notifications generated locally on the device, often utilized for user-defined reminders.</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><p>This section explains how to use the PushNotifications class and its various methods.</p><h3 id="initializing" tabindex="-1"><a class="header-anchor" href="#initializing" aria-hidden="true">#</a> Initializing</h3><p>To initialize push notifications, call the init method. This method initializes both the remote and local notification services.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">await</span> <span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="disposing" tabindex="-1"><a class="header-anchor" href="#disposing" aria-hidden="true">#</a> Disposing</h3><p>When you no longer need push notifications, make sure to dispose of the resources by calling the dispose method. This will clean up any ongoing processes and release system resources.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="asking-permission" tabindex="-1"><a class="header-anchor" href="#asking-permission" aria-hidden="true">#</a> Asking Permission</h3><p>To ask the user for permission to display notifications, use the askPermission method. Note that the behavior may vary depending on the configuration of your project.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">await</span> <span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">askPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Note:</p><ul><li><p>If your project has OneSignal configuration, RemoteNotifications.askPermission will be called. Keep in mind that if you call both RemoteNotifications.askPermission and LocalNotifications.askPermission, the user will see two permission prompts if they neither accept nor reject notification permission.</p></li><li><p>If your project has no setup for OneSignal, LocalNotifications.askPermission will be used, which always works.</p></li></ul></div><h3 id="subscribing-and-unsubscribing" tabindex="-1"><a class="header-anchor" href="#subscribing-and-unsubscribing" aria-hidden="true">#</a> Subscribing and Unsubscribing</h3><p>To subscribe to push notifications, call the subscribe method. This method subscribes to both remote and local notifications.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">await</span> <span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To unsubscribe from push notifications, use the unsubscribe method. This method unsubscribes from both remote and local notifications.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">await</span> <span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="pushing-notifications" tabindex="-1"><a class="header-anchor" href="#pushing-notifications" aria-hidden="true">#</a> Pushing Notifications</h3><p>To send a push notification, use the push method. This method takes a PushNotification object as a parameter, along with an optional channel.</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">await</span> <span class="token class-name">PushNotifications</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
  notification<span class="token punctuation">:</span> pushNotification<span class="token punctuation">,</span>
  channel<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;channel_name&#39;</span></span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The notification parameter is a PushNotification object representing the push notification to be sent. Ensure that the content property of the notification is not empty.</p><p>If the notification type is NotificationType.local, the notification will be sent using the LocalNotifications.push method.</p><p>For other notification types, the notification will be sent using the RemoteNotifications.push method, along with the specified channel if provided.</p><h2 id="best-practices-using-the-pushnotifications-class" tabindex="-1"><a class="header-anchor" href="#best-practices-using-the-pushnotifications-class" aria-hidden="true">#</a> Best Practices: Using the PushNotifications Class</h2><p>When implementing push notifications in your Flutter app, it&#39;s recommended to use the <code>PushNotifications</code> class as a central interface for handling both remote and local notifications. This ensures a unified and consistent approach throughout your application. Here are a few reasons why you should use the <code>PushNotifications</code> class wherever push notifications are needed, rather than accessing the remote and local services directly:</p><ol><li><p>Abstraction and Encapsulation: The <code>PushNotifications</code> class abstracts away the underlying implementation details of the remote and local notification services. By using this class, developers can work with a high-level interface that provides a consistent set of methods and hides the complexity of interacting with the individual services.</p></li><li><p>Code Modularity and Maintainability: By utilizing the <code>PushNotifications</code> class, you decouple your app&#39;s code from the specific implementation details of the remote and local services. This promotes code modularity and improves maintainability. If there are any changes or updates to the notification services in the future, you can easily make the necessary modifications within the <code>PushNotifications</code> class without affecting other parts of your app.</p></li><li><p>Simplified Integration: When integrating push notifications into different parts of your app, using the <code>PushNotifications</code> class provides a straightforward and standardized approach. Developers across your team can easily understand and use the class, resulting in a more consistent implementation of push notifications across your app.</p></li><li><p>Future-Proofing: The <code>PushNotifications</code> class acts as a layer of abstraction that shields your app from potential changes or updates in the remote and local notification services. If you ever decide to switch to a different notification service or update the existing implementation, you can make the necessary adjustments within the <code>PushNotifications</code> class, ensuring minimal impact on the rest of your app.</p></li></ol><p>By following these best practices and utilizing the <code>PushNotifications</code> class, you can achieve a more organized, maintainable, and future-proof implementation of push notifications in your Flutter app. Remember to encourage developers on your team to utilize the <code>PushNotifications</code> class wherever push notifications are needed and discourage direct usage of the remote and local services.</p><h2 id="source-code" tabindex="-1"><a class="header-anchor" href="#source-code" aria-hidden="true">#</a> Source Code</h2><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;dart:async&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;./services/local.dart&#39;</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;./services/remote.dart&#39;</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;../models/notification.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">PushNotifications</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> remoteUserIdStream <span class="token operator">=</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span>userIdStream<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token keyword">get</span> remoteUserId <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span>userId<span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">askPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token comment">// RemoteNotifications.askPermission only works if OneSignal config is there</span>
    <span class="token comment">// And if we call RemoteNotifications.askPermission and LocalNotifications.askPermission both then</span>
    <span class="token comment">// Two prompts will be shown to the user in case when user neither accepts nor rejects notification permission.</span>

    <span class="token comment">// Local notification permission always works even if project has no setup for onesignal</span>
    <span class="token keyword">await</span> <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">askPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    required <span class="token class-name">PushNotification</span> notification<span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token operator">?</span> channel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span>notification<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isNotEmpty<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">NotificationType</span><span class="token punctuation">.</span>local <span class="token operator">==</span> notification<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token class-name">LocalNotifications</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>notification<span class="token punctuation">:</span> notification<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">await</span> <span class="token class-name">RemoteNotifications</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>notification<span class="token punctuation">:</span> notification<span class="token punctuation">,</span> channel<span class="token punctuation">:</span> channel<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33);function h(m,f){const a=o("router-link");return c(),p("div",null,[r,n("nav",d,[n("ul",null,[n("li",null,[t(a,{to:"#overview"},{default:e(()=>[s("Overview")]),_:1})]),n("li",null,[t(a,{to:"#usage"},{default:e(()=>[s("Usage")]),_:1}),n("ul",null,[n("li",null,[t(a,{to:"#initializing"},{default:e(()=>[s("Initializing")]),_:1})]),n("li",null,[t(a,{to:"#disposing"},{default:e(()=>[s("Disposing")]),_:1})]),n("li",null,[t(a,{to:"#asking-permission"},{default:e(()=>[s("Asking Permission")]),_:1})]),n("li",null,[t(a,{to:"#subscribing-and-unsubscribing"},{default:e(()=>[s("Subscribing and Unsubscribing")]),_:1})]),n("li",null,[t(a,{to:"#pushing-notifications"},{default:e(()=>[s("Pushing Notifications")]),_:1})])])]),n("li",null,[t(a,{to:"#best-practices-using-the-pushnotifications-class"},{default:e(()=>[s("Best Practices: Using the PushNotifications Class")]),_:1})]),n("li",null,[t(a,{to:"#source-code"},{default:e(()=>[s("Source Code")]),_:1})])])]),k])}const b=i(u,[["render",h],["__file","notification.html.vue"]]);export{b as default};
